# Система аутентификации API

## Структура директорий

```
/api/auth/
├── logout/           # Выход из системы
├── refresh/          # Обновление токенов
└── providers/        # Провайдеры аутентификации
    └── farcaster/    # Аутентификация через Farcaster
```

## Эндпоинты

### Общие эндпоинты

- `/api/auth/logout` - выход из системы, очистка токенов и куки
- `/api/auth/refresh` - обновление JWT токена с помощью refresh токена

### Провайдеры аутентификации

- `/api/auth/providers/farcaster` - аутентификация через Farcaster
  - **POST**: Вход в аккаунт через Farcaster 
  - **GET**: Проверка текущей сессии пользователя

## Принципы организации

1. **Единая точка аутентификации**
   - Все эндпоинты аутентификации находятся в одной директории
   - Разделение по функциональности (сессии, провайдеры)

2. **Расширяемость**
   - Простое добавление новых провайдеров аутентификации
   - Каждый провайдер в отдельной директории

3. **Безопасность**
   - JWT для локальной проверки авторизации
   - Refresh токены для долгосрочных сессий
   - Хранение токенов только в защищенных куки

## Реализация

Используется двухуровневая система аутентификации:
1. Первичная проверка через провайдера (Farcaster API)
2. Поддержание сессии с помощью JWT токенов

Токены хранятся только в cookies, без дублирования в базе данных, что уменьшает нагрузку на сервер и упрощает систему. 