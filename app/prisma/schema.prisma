// Основная модель пользователя
model User {
  id            String      @id @default(uuid())
  email         String?     @unique
  name          String?
  image         String?
  created_at    DateTime    @default(now())
  updated_at    DateTime    @updatedAt

  // Отношения с другими моделями
  progress      Progress[]  @relation("UserProgress")
  owned_progress Progress[] @relation("ProgressOwner")
  sessions      Session[]
  profiles      Profile[]
}

// Модель для хранения прогресса игры
model Progress {
  id           String   @id @default(uuid())
  user_id      String   @unique
  owner_id     String   // ID владельца прогресса
  game_state   Json
  version      Int      @default(1)
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt
  is_compressed Boolean @default(false)

  // Связи с другими моделями
  user         User?    @relation("UserProgress", fields: [user_id], references: [id])
  owner        User?    @relation("ProgressOwner", fields: [owner_id], references: [id])

  @@index([user_id])
  @@index([owner_id])
} 